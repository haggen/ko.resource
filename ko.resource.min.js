/*
 * Knockout Resource v0.4.2 2012-08-31 16:57:00 -0300
 * by Arthur Corenzan <arthur@corenzan.com>
 * licensed under http://creativecommons.org/licenses/by/3.0
 * more on http://github.com/haggen/ko.resource
 */
(function(j,l,k){var f;f=function(g,f,i,h){h===k&&(h=i,i={});j.ajax({url:f,type:g,data:i,success:h})};l.resource=function(g,m,i){var h;m===k&&(m={});i===k&&(i={});h=function(c){var a=this;c===k&&(c={});j.each(i,function(b,d){a[b]=d instanceof Function?function(){d.apply(a,arguments)}:d});a.serialize=function(){var b=l.toJS(a);j.each(b,function(a,e){0===a.indexOf("__")||"function"===typeof e?delete b[a]:e instanceof Array&&j.each(e,function(a,b){"serialize"in b&&(e[a]=b.serialize())})});return b};
a.update_attributes=function(b){j.each(b,function(b,e){if(a[b]===k)a[b]=e instanceof Function?l.computed(e,a):e instanceof Array?l.observableArray(e):l.observable(e);else a[b](e)})};a.save=function(b){"_id"in a?f("put",g+"/"+a._id(),a.serialize(),function(d){b instanceof Function&&b.call(a,d)}):f("post",g,a.serialize(),function(d){a.update_attributes({_id:d._id});b instanceof Function&&b.call(a,d)})};a.fetch=function(b){f("get",g+"/"+a._id(),null,function(d){a.update_attributes(d);b instanceof Function&&
b.call(a,d)})};a.destroy=function(b){f("delete",g+"/"+a._id(),function(d){b instanceof Function&&b.call(a,d)})};a.request=function(b,d,e,c){c===k&&(c=e,e={});f(b,g+d,e,function(b){c.call(a,b)})};a.update_attributes(m);a.update_attributes(c instanceof String?JSON.parse(c):c);"initialize"in a&&a.initialize(c)};h.fetch=function(c,a){c instanceof Function&&(a=c,c={});f("get",g,c,function(b){a(j.map(b,function(a){return new h(a)}))})};return h}})(window.jQuery,window.ko);
