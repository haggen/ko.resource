/*
 * Knockout Resource v0.4.2 2012-08-31 16:57:00 -0300
 * by Arthur Corenzan <arthur@corenzan.com>
 * licensed under http://creativecommons.org/licenses/by/3.0
 * more on http://github.com/haggen/ko.resource
 */
(function(i,h,k){var g;g=function(f,g,h,j){f={url:g,type:f,data:h,success:j};console.log("Request",f);i.ajax(f)};h.resource=function(f,l,m){var j;l===k&&(l={});m===k&&(m={});j=function(c){var a=this;c===k&&(c={});i.each(m,function(b,d){a[b]=d instanceof Function?function(){d.apply(a,arguments)}:d});a.serialize=function(){var b=h.toJS(a);i.each(b,function(a,e){0===a.indexOf("__")||"function"===typeof e?delete b[a]:e instanceof Array&&i.each(e,function(a,b){"serialize"in b&&(e[a]=b.serialize())})});
return b};a.update_attributes=function(b){i.each(b,function(b,e){if(a[b]===k)a[b]=e instanceof Function?h.computed(e,a):e instanceof Array?h.observableArray(e):h.observable(e);else a[b](e)})};a.save=function(b){"_id"in a?g("put",f+"/"+a._id(),a.serialize(),function(d){b instanceof Function&&b.call(a,d)}):g("post",f,a.serialize(),function(d){a.update_attributes({_id:d._id});b instanceof Function&&b.call(a,d)})};a.fetch=function(b){g("get",f+"/"+a._id(),null,function(d){a.update_attributes(d);b instanceof
Function&&b.call(a,d)})};a.destroy=function(b){g("delete",f+"/"+a._id(),function(d){b instanceof Function&&b.call(a,d)})};a.request=function(b,d,e,c){c===k&&(c=e,e={});g(b,f+d,e,function(b){c.call(a,b)})};a.update_attributes(l);a.update_attributes(c instanceof String?JSON.parse(c):c);"initialize"in a&&a.initialize(c)};j.fetch=function(c,a){c instanceof Function&&(a=c,c={});g("get",f,c,function(b){a(i.map(b,function(a){return new j(a)}))})};return j}})(window.jQuery,window.ko);
